{% extends "base.html" %}
{% block title %}Редактор whitelist{% endblock %}

{% block content %}
<main class="container admin-container">
  <h1>Редактор whitelist</h1>
  <p><a href="{{ url_for('admin_panel') }}" class="btn-check">&larr; Назад в админ панель</a></p>

  <section class="admin-section">
    <h2>Добавить / удалить UUID</h2>
    <form method="POST" action="{{ url_for('admin_whitelist') }}" class="form-inline">
      {{ form.hidden_tag() }}
      <div class="input-group">
        {{ form.uuid.label(class="form-label") }}
        {{ form.uuid(placeholder="Введите UUID", class="form-control") }}
      </div>
      <div class="input-group">
        {{ form.action.label(class="form-label") }}
        {{ form.action(class="form-select") }}
      </div>
      <div class="input-group">
        {{ form.submit(class="btn-check btn-primary") }}
      </div>
    </form>
  </section>

  <section class="admin-section">
    <h2>Текущий whitelist</h2>
    {% if whitelist %}
      <ul class="whitelist-list">
        {% for u in whitelist %}
          <li class="whitelist-item">
            <span>{{ u }}</span>
            <form method="POST" action="{{ url_for('admin_whitelist') }}" class="form-inline-item">
              <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
              <input type="hidden" name="uuid" value="{{ u }}">
              <button type="submit" name="action" value="delete" class="btn-check btn-danger btn-sm">Удалить</button>
            </form>
          </li>
        {% endfor %}
      </ul>
    {% else %}
      <p>Whitelist пуст.</p>
    {% endif %}
  </section>
</main>
{% endblock %}